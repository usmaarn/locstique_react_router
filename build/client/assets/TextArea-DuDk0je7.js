import{r as i,R as I}from"./chunk-D4RADZKF-DAz_vGcL.js";import{s as we,v as B,F as Me,E as be,j as L,_ as ze,i as M,x as he,w as Ce,n as Pe,g as _e,m as je,f as He,D as Le,y as Be,h as We}from"./button-BHijcmC7.js";import{u as Ke,B as Ye,r as ye,i as Ze,f as qe,t as Ge,a as Xe,c as Ue,g as Je,d as Qe,e as ke}from"./getAllowClear-RJcteg7o.js";import{u as Re,R as et}from"./index-BAed6j4S.js";import{F as tt,u as at}from"./ContextIsolator-oaooBrlp.js";var nt=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,rt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ve={},w;function ot(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(n&&ve[a])return ve[a];var t=window.getComputedStyle(e),c=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),m=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),s=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),p=rt.map(function(d){return"".concat(d,":").concat(t.getPropertyValue(d))}).join(";"),S={sizingStyle:p,paddingSize:m,borderSize:s,boxSizing:c};return n&&a&&(ve[a]=S),S}function it(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;w||(w=document.createElement("textarea"),w.setAttribute("tab-index","-1"),w.setAttribute("aria-hidden","true"),w.setAttribute("name","hiddenTextarea"),document.body.appendChild(w)),e.getAttribute("wrap")?w.setAttribute("wrap",e.getAttribute("wrap")):w.removeAttribute("wrap");var c=ot(e,n),m=c.paddingSize,s=c.borderSize,p=c.boxSizing,S=c.sizingStyle;w.setAttribute("style","".concat(S,";").concat(nt)),w.value=e.value||e.placeholder||"";var d=void 0,v=void 0,z,b=w.scrollHeight;if(p==="border-box"?b+=s:p==="content-box"&&(b-=m),a!==null||t!==null){w.value=" ";var T=w.scrollHeight-m;a!==null&&(d=T*a,p==="border-box"&&(d=d+m+s),b=Math.max(d,b)),t!==null&&(v=T*t,p==="border-box"&&(v=v+m+s),z=b>v?"":"hidden",b=Math.min(v,b))}var x={height:b,overflowY:z,resize:"none"};return d&&(x.minHeight=d),v&&(x.maxHeight=v),x}var st=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],pe=0,ge=1,xe=2,lt=i.forwardRef(function(e,n){var a=e,t=a.prefixCls,c=a.defaultValue,m=a.value,s=a.autoSize,p=a.onResize,S=a.className,d=a.style,v=a.disabled,z=a.onChange;a.onInternalAutoSize;var b=we(a,st),T=Re(c,{value:m,postState:function(g){return g??""}}),x=B(T,2),P=x[0],W=x[1],K=function(g){W(g.target.value),z==null||z(g)},C=i.useRef();i.useImperativeHandle(n,function(){return{textArea:C.current}});var _=i.useMemo(function(){return s&&Me(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),Y=B(_,2),h=Y[0],R=Y[1],O=!!s,te=function(){try{if(document.activeElement===C.current){var g=C.current,ee=g.selectionStart,j=g.selectionEnd,ne=g.scrollTop;C.current.setSelectionRange(ee,j),C.current.scrollTop=ne}}catch{}},Z=i.useState(xe),q=B(Z,2),E=q[0],V=q[1],ae=i.useState(),U=B(ae,2),J=U[0],G=U[1],A=function(){V(pe)};be(function(){O&&A()},[m,h,R,O]),be(function(){if(E===pe)V(ge);else if(E===ge){var y=it(C.current,!1,h,R);V(xe),G(y)}else te()},[E]);var o=i.useRef(),X=function(){Ce.cancel(o.current)},Q=function(g){E===xe&&(p==null||p(g),s&&(X(),o.current=Ce(function(){A()})))};i.useEffect(function(){return X},[]);var k=O?J:null,F=L(L({},d),k);return(E===pe||E===ge)&&(F.overflowY="hidden",F.overflowX="hidden"),i.createElement(et,{onResize:Q,disabled:!(s||p)},i.createElement("textarea",ze({},b,{ref:C,style:F,className:M(t,S,he({},"".concat(t,"-disabled"),v)),disabled:v,value:P,onChange:K})))}),ut=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],ct=I.forwardRef(function(e,n){var a,t=e.defaultValue,c=e.value,m=e.onFocus,s=e.onBlur,p=e.onChange,S=e.allowClear,d=e.maxLength,v=e.onCompositionStart,z=e.onCompositionEnd,b=e.suffix,T=e.prefixCls,x=T===void 0?"rc-textarea":T,P=e.showCount,W=e.count,K=e.className,C=e.style,_=e.disabled,Y=e.hidden,h=e.classNames,R=e.styles,O=e.onResize,te=e.onClear,Z=e.onPressEnter,q=e.readOnly,E=e.autoSize,V=e.onKeyDown,ae=we(e,ut),U=Re(t,{value:c,defaultValue:t}),J=B(U,2),G=J[0],A=J[1],o=G==null?"":String(G),X=I.useState(!1),Q=B(X,2),k=Q[0],F=Q[1],y=I.useRef(!1),g=I.useState(null),ee=B(g,2),j=ee[0],ne=ee[1],re=i.useRef(null),oe=i.useRef(null),$=function(){var r;return(r=oe.current)===null||r===void 0?void 0:r.textArea},ie=function(){$().focus()};i.useImperativeHandle(n,function(){var f;return{resizableTextArea:oe.current,focus:ie,blur:function(){$().blur()},nativeElement:((f=re.current)===null||f===void 0?void 0:f.nativeElement)||$()}}),i.useEffect(function(){F(function(f){return!_&&f})},[_]);var de=I.useState(null),ue=B(de,2),se=ue[0],fe=ue[1];I.useEffect(function(){if(se){var f;(f=$()).setSelectionRange.apply(f,Pe(se))}},[se]);var u=Ke(W,P),l=(a=u.max)!==null&&a!==void 0?a:d,D=Number(l)>0,N=u.strategy(o),Ee=!!l&&N>l,Se=function(r,H){var ce=H;!y.current&&u.exceedFormatter&&u.max&&u.strategy(H)>u.max&&(ce=u.exceedFormatter(H,{max:u.max}),H!==ce&&fe([$().selectionStart||0,$().selectionEnd||0])),A(ce),ye(r.currentTarget,r,p,ce)},Ae=function(r){y.current=!0,v==null||v(r)},$e=function(r){y.current=!1,Se(r,r.currentTarget.value),z==null||z(r)},Ie=function(r){Se(r,r.target.value)},Ne=function(r){r.key==="Enter"&&Z&&Z(r),V==null||V(r)},Te=function(r){F(!0),m==null||m(r)},Oe=function(r){F(!1),s==null||s(r)},Ve=function(r){A(""),ie(),ye($(),r,p)},me=b,le;u.show&&(u.showFormatter?le=u.showFormatter({value:o,count:N,maxLength:l}):le="".concat(N).concat(D?" / ".concat(l):""),me=I.createElement(I.Fragment,null,me,I.createElement("span",{className:M("".concat(x,"-data-count"),h==null?void 0:h.count),style:R==null?void 0:R.count},le)));var Fe=function(r){var H;O==null||O(r),(H=$())!==null&&H!==void 0&&H.style.height&&ne(!0)},De=!E&&!P&&!S;return I.createElement(Ye,{ref:re,value:o,allowClear:S,handleReset:Ve,suffix:me,prefixCls:x,classNames:L(L({},h),{},{affixWrapper:M(h==null?void 0:h.affixWrapper,he(he({},"".concat(x,"-show-count"),P),"".concat(x,"-textarea-allow-clear"),S))}),disabled:_,focused:k,className:M(K,Ee&&"".concat(x,"-out-of-range")),style:L(L({},C),j&&!De?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof le=="string"?le:void 0}},hidden:Y,readOnly:q,onClear:te},I.createElement(lt,ze({},ae,{autoSize:E,maxLength:d,onKeyDown:Ne,onChange:Ie,onFocus:Te,onBlur:Oe,onCompositionStart:Ae,onCompositionEnd:$e,className:M(h==null?void 0:h.textarea),style:L(L({},R==null?void 0:R.textarea),{},{resize:C==null?void 0:C.resize}),disabled:_,prefixCls:x,onResize:Fe,ref:oe,readOnly:q})))});const dt=e=>{const{componentCls:n,paddingLG:a}=e,t=`${n}-textarea`;return{[`textarea${n}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${n}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${n}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[t]:{position:"relative","&-show-count":{[`${n}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${n},
        &-affix-wrapper${t}-has-feedback ${n}
      `]:{paddingInlineEnd:a},[`&-affix-wrapper${n}-affix-wrapper`]:{padding:0,[`> textarea${n}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${n}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${n}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${t}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${n}-affix-wrapper-rtl`]:{[`${n}-suffix`]:{[`${n}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${n}-affix-wrapper-sm`]:{[`${n}-suffix`]:{[`${n}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},ft=_e(["Input","TextArea"],e=>{const n=je(e,Ze(e));return[dt(n)]},qe,{resetFont:!1});var mt=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,t=Object.getOwnPropertySymbols(e);c<t.length;c++)n.indexOf(t[c])<0&&Object.prototype.propertyIsEnumerable.call(e,t[c])&&(a[t[c]]=e[t[c]]);return a};const St=i.forwardRef((e,n)=>{var a;const{prefixCls:t,bordered:c=!0,size:m,disabled:s,status:p,allowClear:S,classNames:d,rootClassName:v,className:z,style:b,styles:T,variant:x,showCount:P,onMouseDown:W,onResize:K}=e,C=mt(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:_,direction:Y,allowClear:h,autoComplete:R,className:O,style:te,classNames:Z,styles:q}=He("textArea"),E=i.useContext(Le),V=s??E,{status:ae,hasFeedback:U,feedbackIcon:J}=i.useContext(tt),G=ke(ae,p),A=i.useRef(null);i.useImperativeHandle(n,()=>{var u;return{resizableTextArea:(u=A.current)===null||u===void 0?void 0:u.resizableTextArea,focus:l=>{var D,N;Ge((N=(D=A.current)===null||D===void 0?void 0:D.resizableTextArea)===null||N===void 0?void 0:N.textArea,l)},blur:()=>{var l;return(l=A.current)===null||l===void 0?void 0:l.blur()}}});const o=_("input",t),X=at(o),[Q,k,F]=Xe(o,v),[y]=ft(o,X),{compactSize:g,compactItemClassnames:ee}=Be(o,Y),j=We(u=>{var l;return(l=m??g)!==null&&l!==void 0?l:u}),[ne,re]=Ue("textArea",x,c),oe=Je(S??h),[$,ie]=i.useState(!1),[de,ue]=i.useState(!1),se=u=>{ie(!0),W==null||W(u);const l=()=>{ie(!1),document.removeEventListener("mouseup",l)};document.addEventListener("mouseup",l)},fe=u=>{var l,D;if(K==null||K(u),$&&typeof getComputedStyle=="function"){const N=(D=(l=A.current)===null||l===void 0?void 0:l.nativeElement)===null||D===void 0?void 0:D.querySelector("textarea");N&&getComputedStyle(N).resize==="both"&&ue(!0)}};return Q(y(i.createElement(ct,Object.assign({autoComplete:R},C,{style:Object.assign(Object.assign({},te),b),styles:Object.assign(Object.assign({},q),T),disabled:V,allowClear:oe,className:M(F,X,z,v,ee,O,de&&`${o}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},d),Z),{textarea:M({[`${o}-sm`]:j==="small",[`${o}-lg`]:j==="large"},k,d==null?void 0:d.textarea,Z.textarea,$&&`${o}-mouse-active`),variant:M({[`${o}-${ne}`]:re},Qe(o,G)),affixWrapper:M(`${o}-textarea-affix-wrapper`,{[`${o}-affix-wrapper-rtl`]:Y==="rtl",[`${o}-affix-wrapper-sm`]:j==="small",[`${o}-affix-wrapper-lg`]:j==="large",[`${o}-textarea-show-count`]:P||((a=e.count)===null||a===void 0?void 0:a.show)},k)}),prefixCls:o,suffix:U&&i.createElement("span",{className:`${o}-textarea-suffix`},J),showCount:P,ref:A,onResize:fe,onMouseDown:se}))))});export{St as T};
