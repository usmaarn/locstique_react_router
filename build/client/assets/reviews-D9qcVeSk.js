import{w as I}from"./with-props-DEE0GO7A.js";import{r as l,a as w,j as e}from"./chunk-D4RADZKF-DaSNxZfm.js";import{I as T}from"./image-upload-fT7Qk1i-.js";import{g as C,s as F}from"./utils-CNuFmlBv.js";import{F as o}from"./index-09CzirT7.js";import{I as b}from"./PlusOutlined-B6pnUuBs.js";import{B as c}from"./button-B_-uB0p2.js";import{M as u}from"./index-CdmI3sfc.js";import{s as x}from"./index-x0QAANdl.js";import{I as p}from"./index-DQgtkSSW.js";import{C as v}from"./index-BfByirc8.js";import{F as y}from"./Table-iXZT6ZR3.js";import{T as k}from"./index-DUFb1Y1K.js";import"./index-B7NgtD67.js";import"./pickAttrs-0mC0MTC4.js";import"./index-uCDk3Dwg.js";import"./ContextIsolator-Bixc0f3v.js";import"./collapse-BbEVqHco.js";import"./fade-uAF_9O56.js";import"./useBreakpoint-CuMT98fn.js";import"./DeleteOutlined-DFutYCzo.js";import"./EyeOutlined-DuaSqq6v.js";import"./ExclamationCircleFilled-BBVgPxRh.js";import"./CheckOutlined-DvuVAbKD.js";import"./CloseCircleFilled-CWl1RwBe.js";import"./CloseOutlined-yNYFdaZx.js";import"./row-CE_c2Bfj.js";import"./index-BDDxPlyk.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./convertToTooltipProps-BMW7kJHh.js";import"./index-CcOXC9M3.js";import"./addEventListener-C4a4rut2.js";import"./LeftOutlined-DWSwulV9.js";import"./RightOutlined-BcmokP1E.js";import"./AntdIcon-D0-nQjfA.js";import"./index-viox800X.js";import"./InfoCircleFilled-D-3399yE.js";import"./ActionButton-B3979FWd.js";import"./useClosable-Fbrkv2Hs.js";import"./extendsObject-C6pccdOq.js";import"./Skeleton-BJ3peajE.js";import"./context-DBox4FW0.js";import"./PurePanel-BYCH4EcD.js";import"./getAllowClear-5vxR2N0h.js";import"./Input-BajgXS1c.js";import"./SearchOutlined-BeNzckjZ.js";import"./TextArea-COy2yrfm.js";import"./EllipsisOutlined-35K-TJhe.js";import"./Overflow-Byk-11uQ.js";import"./styleChecker-BgJ1QV5m.js";import"./index-B-uu2mgo.js";import"./move-ynh_U9QL.js";import"./DownOutlined-Bi0ruqli.js";import"./index-C01d6hDI.js";import"./index-C5DHK3f-.js";import"./index-BJhI9T6T.js";import"./scrollTo-Cx9Ki3Mk.js";import"./Pagination-LfsAsTb5.js";import"./index-CH2Uf8NX.js";const qe=I(function({loaderData:{reviews:f}}){const[h,m]=l.useState(!1),r=w(),a=r.state!="idle",[i]=o.useForm(),j=l.useMemo(()=>[{title:"Image",dataIndex:"image",render:t=>e.jsx(b,{width:30,src:C(t),alt:""})},{title:"Name",dataIndex:"user"},{title:"Title",dataIndex:"title"},{title:"Comment",dataIndex:"comment",render:t=>t??"N/A"},{title:"Action",id:"action",render:(t,s)=>e.jsx("div",{className:"space-x-2",children:e.jsx(c,{onClick:()=>g(s),size:"small",danger:!0,children:"Delete"})})}],[]);function g(t){u.confirm({title:"Delete Review",content:"Are you sure you want to delete review",okButtonProps:{loading:a},onOk:async()=>r.submit({id:t.id},{method:"DELETE",encType:"application/json"})})}return l.useEffect(()=>{var t,s,n,d;(t=r.data)!=null&&t.message&&(m(!1),x.success(r.data.message)),(s=r.data)!=null&&s.error&&x.error(r.data.error),(n=r.data)!=null&&n.errors&&F(i,(d=r.data)==null?void 0:d.errors)},[r.data]),e.jsxs(e.Fragment,{children:[e.jsx(u,{title:"Add Review",open:h,onClose:()=>m(!1),onCancel:()=>{i.resetFields(),m(!1)},okText:"Submit",onOk:i.submit,okButtonProps:{loading:a},children:e.jsxs(o,{form:i,labelCol:{sm:5},onFinish:t=>r.submit(t,{method:"POST",encType:"application/json"}),children:[e.jsx(o.Item,{label:"User",name:"user",rules:[{required:!0}],children:e.jsx(p,{placeholder:"Full Name"})}),e.jsx(o.Item,{label:"Image",name:"image",rules:[{required:!0}],children:e.jsx(T,{maxCount:1,onChange:t=>i.setFieldValue("image",t[0].response??t[0].uid)})}),e.jsx(o.Item,{label:"title",name:"title",rules:[{required:!0}],children:e.jsx(p,{placeholder:"Title"})}),e.jsx(o.Item,{label:"Comment",name:"comment",rules:[{required:!0}],children:e.jsx(p.TextArea,{placeholder:"Title"})})]})}),e.jsx(v,{title:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k.Title,{level:5,children:"Reviews"}),e.jsx(c,{type:"primary",onClick:()=>m(!0),children:"Add Review"})]}),children:e.jsx(y,{size:"small",loading:a,scroll:{x:1e3},columns:j,dataSource:f})})]})});export{qe as default};
