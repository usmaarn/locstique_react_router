import{w as N,a as v}from"./with-props-DEE0GO7A.js";import{j as e,e as j,z as b,a as w}from"./chunk-D4RADZKF-DaSNxZfm.js";import{c as I}from"./config-Y8BI0tot.js";import{R as h,C as x}from"./row-BnT6tonL.js";import{S as f}from"./index-2IgG1P0V.js";import{C as i}from"./index-DBxR047P.js";import{L as u}from"./index-C3_NpepX.js";import{S as d}from"./Skeleton-Cc7GcUfO.js";import{P as c}from"./price-format-BQXY6eqB.js";import{a as S,g as k}from"./utils-CNuFmlBv.js";import{B as C}from"./button-psUsNra1.js";import{A as F}from"./index-B5puncBd.js";import{F as g}from"./index-pwT5WMYW.js";import{I as q}from"./index-DkAixL0n.js";import"./index-D_2n34f_.js";import"./useBreakpoint-BZoAMyoC.js";import"./CloseOutlined-CH9td4m-.js";import"./EllipsisOutlined-B4v_Lxp7.js";import"./index-DQiixNXx.js";import"./ContextIsolator-uw1dAu9_.js";import"./index-B7NgtD67.js";import"./Overflow-Dp1-Tb9e.js";import"./getAllowClear-CP04I2Os.js";import"./CloseCircleFilled-ByM770YT.js";import"./extendsObject-C6pccdOq.js";import"./index-D7nRIrg9.js";import"./pickAttrs-sZVM6kZ0.js";import"./PurePanel-hu4RwqU8.js";import"./move-BwAkI80s.js";import"./CheckOutlined-EGKTL_w4.js";import"./DownOutlined-xR66pWRG.js";import"./SearchOutlined-DvcBEtcs.js";import"./Pagination-C6lDp168.js";import"./LeftOutlined-DEQdcN0J.js";import"./RightOutlined-H4r2QFtg.js";import"./index-DA_VPVaD.js";import"./react-number-format.es-ogMwFcnb.js";import"./index-C3axmpxH.js";import"./collapse-BbEVqHco.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./convertToTooltipProps-BMW7kJHh.js";import"./ExclamationCircleFilled-Dlq3ezWw.js";import"./Input-DelRAUgv.js";import"./EyeOutlined-D6oIVxEW.js";import"./TextArea-BRcnTUEg.js";function P(){return e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto! mb-12!",children:[e.jsx(x,{span:24,md:16,children:e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(i,{children:e.jsx(u,{dataSource:[1,2],renderItem:()=>e.jsx(d,{avatar:!0,paragraph:{rows:2},loading:!0})})}),e.jsx(i,{children:e.jsx(d.Input,{className:"w-full! h-16!"})})]})}),e.jsx(x,{span:24,md:8,children:e.jsxs(i,{children:[e.jsx(d,{loading:!0,paragraph:!0}),e.jsx(d.Button,{className:"w-full! mt-4"})]})})]})}const z=({loading:a})=>{const{items:t}=j(),r=t.reduce((l,s)=>l+s.quantity,0),n=0,o=t.reduce((l,s)=>l+(s.price-S(s.price,s.discount)),0),m=t.reduce((l,s)=>l+s.quantity*s.price,0),p=n+m-o,y=o/m*100;return e.jsxs(i,{title:"Order Summary",className:"bg-gray-50!",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Item's Total"," (",r,")"]}),e.jsx(c,{value:m})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:"Delivery Fee"}),e.jsx(c,{value:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Discount(",e.jsx(c,{prefix:"",suffix:"%",decimalScale:0,value:y}),")"]}),e.jsx(c,{value:o})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3",children:[e.jsx("p",{className:"font-bold",children:"Total"}),e.jsx(c,{value:p})]}),e.jsx(C,{className:"w-full mt-8",loading:a,htmlType:"submit",size:"large",type:"primary",children:"Checkout"})]})},A=()=>{const{items:a}=j();return e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(i,{title:"Cart Items",className:"bg-gray-50!",classNames:{body:"p-0!"},children:e.jsx(u,{size:"small",dataSource:a,renderItem:(t,r)=>e.jsx(u.Item,{children:e.jsx(u.Item.Meta,{avatar:e.jsx(F,{src:k(t.image),shape:"square",size:"large"}),title:t.name,description:e.jsxs("p",{children:["QTY: ",t.quantity]})})})})}),e.jsx(i,{className:"bg-gray-50!",title:"Delivery Address",children:e.jsx(g.Item,{name:"address",rules:[{required:!0}],children:e.jsx(q.TextArea,{placeholder:"Enter delivery address"})})})]})};async function Ie({params:a}){const t=localStorage.getItem(I.storage.cartName);if(t){const r=JSON.parse(t);if(r.length>0)return{items:r}}return b("/shop")}const Se=N(function({loaderData:{items:t}}){const r=w(),n=r.state!=="idle";function o(m){r.submit({...m,items:JSON.stringify(t.map(p=>({id:p.id,quantity:p.quantity})))},{method:"POST"})}return e.jsx(g,{onFinish:o,children:e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto!",children:[e.jsx(x,{span:24,md:16,children:e.jsx(A,{})}),e.jsx(x,{span:24,md:8,children:e.jsx(z,{loading:n})})]})})}),ke=v(function(){return e.jsx(P,{})});export{ke as HydrateFallback,Ie as clientLoader,Se as default};
