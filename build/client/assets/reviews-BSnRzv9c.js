import{w as I}from"./with-props-zgZ4Swg7.js";import{r as l,a as w,j as e}from"./chunk-D4RADZKF-DAz_vGcL.js";import{I as T}from"./image-upload-CdAo5aNq.js";import{g as C,s as F}from"./utils-CNuFmlBv.js";import{F as o}from"./index-BRBbHYnL.js";import{I as b}from"./index-B_opkYhe.js";import{B as c}from"./button-BHijcmC7.js";import{M as u}from"./index-3YpVs0X4.js";import{s as x}from"./index-DXFem7WI.js";import{I as p}from"./index-DB0Ln5WD.js";import{C as v}from"./index-DBVo6aQJ.js";import{F as y}from"./Table-BbDh7AMc.js";import{T as k}from"./index-C9jnjFYw.js";import"./index-D4ZOqxWl.js";import"./pickAttrs-BDmP-lu7.js";import"./index-BAed6j4S.js";import"./ContextIsolator-oaooBrlp.js";import"./collapse-BbEVqHco.js";import"./fade-D5ET0lYX.js";import"./useBreakpoint-B7m96Ekk.js";import"./DeleteOutlined-DFutYCzo.js";import"./EyeOutlined-6hR7CDcx.js";import"./ExclamationCircleFilled-W6vk6RFQ.js";import"./getAllowClear-RJcteg7o.js";import"./CloseCircleFilled-BB15cPNT.js";import"./CloseOutlined-Dy2HrFbl.js";import"./PlusOutlined-DUPhCR4c.js";import"./AntdIcon-BqQjB-7o.js";import"./row-lNwB0GMQ.js";import"./index-blh_t3tb.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./convertToTooltipProps-FkdqikIB.js";import"./index-B_W-bSKP.js";import"./addEventListener-BzkQ-zOx.js";import"./LeftOutlined-XQszqjzV.js";import"./RightOutlined-ChWhwkp3.js";import"./index-DURpipQz.js";import"./InfoCircleFilled-Bmgfd1T2.js";import"./ActionButton-Lb2x-VjR.js";import"./useClosable-BIv2YQC7.js";import"./extendsObject-C6pccdOq.js";import"./Skeleton-c8QWDCRi.js";import"./context-C02MQkNA.js";import"./PurePanel-DQWTWKaP.js";import"./Input-DsPYekik.js";import"./SearchOutlined-d4YbfynM.js";import"./TextArea-DuDk0je7.js";import"./EllipsisOutlined-CieEX8qC.js";import"./Overflow-CSGCzpcK.js";import"./styleChecker-BoZ39Bhw.js";import"./index-lDD27JVI.js";import"./move-B7plCz5U.js";import"./DownOutlined-DatLSNvX.js";import"./index-DThF2Jli.js";import"./index-CPSPtwXn.js";import"./index-CItnkCRU.js";import"./scrollTo-D2JECFlI.js";import"./Pagination-sp4ziX3s.js";import"./index-BMw-dO_3.js";const qe=I(function({loaderData:{reviews:f}}){const[h,m]=l.useState(!1),r=w(),a=r.state!="idle",[i]=o.useForm(),j=l.useMemo(()=>[{title:"Image",dataIndex:"image",render:t=>e.jsx(b,{width:30,src:C(t),alt:""})},{title:"Name",dataIndex:"user"},{title:"Title",dataIndex:"title"},{title:"Comment",dataIndex:"comment",render:t=>t??"N/A"},{title:"Action",id:"action",render:(t,s)=>e.jsx("div",{className:"space-x-2",children:e.jsx(c,{onClick:()=>g(s),size:"small",danger:!0,children:"Delete"})})}],[]);function g(t){u.confirm({title:"Delete Review",content:"Are you sure you want to delete review",okButtonProps:{loading:a},onOk:async()=>r.submit({id:t.id},{method:"DELETE",encType:"application/json"})})}return l.useEffect(()=>{var t,s,n,d;(t=r.data)!=null&&t.message&&(m(!1),x.success(r.data.message)),(s=r.data)!=null&&s.error&&x.error(r.data.error),(n=r.data)!=null&&n.errors&&F(i,(d=r.data)==null?void 0:d.errors)},[r.data]),e.jsxs(e.Fragment,{children:[e.jsx(u,{title:"Add Review",open:h,onClose:()=>m(!1),onCancel:()=>{i.resetFields(),m(!1)},okText:"Submit",onOk:i.submit,okButtonProps:{loading:a},children:e.jsxs(o,{form:i,labelCol:{sm:5},onFinish:t=>r.submit(t,{method:"POST",encType:"application/json"}),children:[e.jsx(o.Item,{label:"User",name:"user",rules:[{required:!0}],children:e.jsx(p,{placeholder:"Full Name"})}),e.jsx(o.Item,{label:"Image",name:"image",rules:[{required:!0}],children:e.jsx(T,{maxCount:1,onChange:t=>i.setFieldValue("image",t[0].response??t[0].uid)})}),e.jsx(o.Item,{label:"title",name:"title",rules:[{required:!0}],children:e.jsx(p,{placeholder:"Title"})}),e.jsx(o.Item,{label:"Comment",name:"comment",rules:[{required:!0}],children:e.jsx(p.TextArea,{placeholder:"Title"})})]})}),e.jsx(v,{title:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k.Title,{level:5,children:"Reviews"}),e.jsx(c,{type:"primary",onClick:()=>m(!0),children:"Add Review"})]}),children:e.jsx(y,{size:"small",loading:a,scroll:{x:1e3},columns:j,dataSource:f})})]})});export{qe as default};
