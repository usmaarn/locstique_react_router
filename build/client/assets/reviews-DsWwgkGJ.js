import{w as I}from"./with-props-DEE0GO7A.js";import{r as l,a as w,j as e}from"./chunk-D4RADZKF-DaSNxZfm.js";import{I as T}from"./image-upload-Ch4Wm56-.js";import{g as C,s as F}from"./utils-CNuFmlBv.js";import{F as o}from"./index-pwT5WMYW.js";import{I as b}from"./index-CG8krbgW.js";import{B as c}from"./button-psUsNra1.js";import{M as u}from"./index-U7H7YNaD.js";import{s as x}from"./index-RXgHZzVA.js";import{I as p}from"./index-DkAixL0n.js";import{C as v}from"./index-DBxR047P.js";import{F as y}from"./Table-CZ6Fhzs9.js";import{T as k}from"./index-CVYJheHH.js";import"./index-B7NgtD67.js";import"./pickAttrs-sZVM6kZ0.js";import"./index-DQiixNXx.js";import"./ContextIsolator-uw1dAu9_.js";import"./collapse-BbEVqHco.js";import"./fade-mSZPcqJO.js";import"./useBreakpoint-BZoAMyoC.js";import"./DeleteOutlined-DFutYCzo.js";import"./EyeOutlined-D6oIVxEW.js";import"./ExclamationCircleFilled-Dlq3ezWw.js";import"./CheckOutlined-EGKTL_w4.js";import"./CloseCircleFilled-ByM770YT.js";import"./CloseOutlined-CH9td4m-.js";import"./PlusOutlined-DYoTl-KV.js";import"./AntdIcon-BiE3LMb9.js";import"./row-BnT6tonL.js";import"./index-D_2n34f_.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./convertToTooltipProps-BMW7kJHh.js";import"./index-5Msg5uOr.js";import"./addEventListener-C4a4rut2.js";import"./LeftOutlined-DEQdcN0J.js";import"./RightOutlined-H4r2QFtg.js";import"./index-BGqKdiG5.js";import"./InfoCircleFilled-Df3u48DE.js";import"./ActionButton-BVYySoIP.js";import"./useClosable-C_rwWNpt.js";import"./extendsObject-C6pccdOq.js";import"./Skeleton-Cc7GcUfO.js";import"./context-DKxS3ldY.js";import"./PurePanel-hu4RwqU8.js";import"./getAllowClear-CP04I2Os.js";import"./Input-DelRAUgv.js";import"./SearchOutlined-DvcBEtcs.js";import"./TextArea-BRcnTUEg.js";import"./EllipsisOutlined-B4v_Lxp7.js";import"./Overflow-Dp1-Tb9e.js";import"./styleChecker-Nrc6YuFi.js";import"./index-D7nRIrg9.js";import"./move-BwAkI80s.js";import"./DownOutlined-xR66pWRG.js";import"./index-WCc6TPv-.js";import"./index-C8gurDgD.js";import"./index-2IgG1P0V.js";import"./scrollTo-iUzvbL24.js";import"./Pagination-C6lDp168.js";import"./index-DA_VPVaD.js";const Be=I(function({loaderData:{reviews:f}}){const[h,m]=l.useState(!1),r=w(),a=r.state!="idle",[i]=o.useForm(),j=l.useMemo(()=>[{title:"Image",dataIndex:"image",render:t=>e.jsx(b,{width:30,src:C(t),alt:""})},{title:"Name",dataIndex:"user"},{title:"Title",dataIndex:"title"},{title:"Comment",dataIndex:"comment",render:t=>t??"N/A"},{title:"Action",id:"action",render:(t,s)=>e.jsx("div",{className:"space-x-2",children:e.jsx(c,{onClick:()=>g(s),size:"small",danger:!0,children:"Delete"})})}],[]);function g(t){u.confirm({title:"Delete Review",content:"Are you sure you want to delete review",okButtonProps:{loading:a},onOk:async()=>r.submit({id:t.id},{method:"DELETE",encType:"application/json"})})}return l.useEffect(()=>{var t,s,n,d;(t=r.data)!=null&&t.message&&(m(!1),x.success(r.data.message)),(s=r.data)!=null&&s.error&&x.error(r.data.error),(n=r.data)!=null&&n.errors&&F(i,(d=r.data)==null?void 0:d.errors)},[r.data]),e.jsxs(e.Fragment,{children:[e.jsx(u,{title:"Add Review",open:h,onClose:()=>m(!1),onCancel:()=>{i.resetFields(),m(!1)},okText:"Submit",onOk:i.submit,okButtonProps:{loading:a},children:e.jsxs(o,{form:i,labelCol:{sm:5},onFinish:t=>r.submit(t,{method:"POST",encType:"application/json"}),children:[e.jsx(o.Item,{label:"User",name:"user",rules:[{required:!0}],children:e.jsx(p,{placeholder:"Full Name"})}),e.jsx(o.Item,{label:"Image",name:"image",rules:[{required:!0}],children:e.jsx(T,{maxCount:1,onChange:t=>i.setFieldValue("image",t[0].response??t[0].uid)})}),e.jsx(o.Item,{label:"title",name:"title",rules:[{required:!0}],children:e.jsx(p,{placeholder:"Title"})}),e.jsx(o.Item,{label:"Comment",name:"comment",rules:[{required:!0}],children:e.jsx(p.TextArea,{placeholder:"Title"})})]})}),e.jsx(v,{title:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k.Title,{level:5,children:"Reviews"}),e.jsx(c,{type:"primary",onClick:()=>m(!0),children:"Add Review"})]}),children:e.jsx(y,{size:"small",loading:a,scroll:{x:1e3},columns:j,dataSource:f})})]})});export{Be as default};
