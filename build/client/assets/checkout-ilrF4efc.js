import{w as N,a as v}from"./with-props-DEE0GO7A.js";import{j as e,e as j,z as b,a as w}from"./chunk-D4RADZKF-DaSNxZfm.js";import{c as I}from"./config-Y8BI0tot.js";import{R as h,C as x}from"./row-CE_c2Bfj.js";import{S as f}from"./index-BJhI9T6T.js";import{C as i}from"./index-BfByirc8.js";import{L as u}from"./index-ClcyGV2D.js";import{S as d}from"./Skeleton-BJ3peajE.js";import{P as c}from"./price-format-BQXY6eqB.js";import{a as S,g as k}from"./utils-CNuFmlBv.js";import{B as C}from"./button-B_-uB0p2.js";import{A as F}from"./index-C8geSZtw.js";import{F as g}from"./index-09CzirT7.js";import{I as q}from"./index-DQgtkSSW.js";import"./index-BDDxPlyk.js";import"./useBreakpoint-CuMT98fn.js";import"./CloseOutlined-yNYFdaZx.js";import"./EllipsisOutlined-35K-TJhe.js";import"./index-uCDk3Dwg.js";import"./ContextIsolator-Bixc0f3v.js";import"./index-B7NgtD67.js";import"./Overflow-Byk-11uQ.js";import"./getAllowClear-5vxR2N0h.js";import"./CloseCircleFilled-CWl1RwBe.js";import"./extendsObject-C6pccdOq.js";import"./index-B-uu2mgo.js";import"./pickAttrs-0mC0MTC4.js";import"./PurePanel-BYCH4EcD.js";import"./move-ynh_U9QL.js";import"./CheckOutlined-DvuVAbKD.js";import"./DownOutlined-Bi0ruqli.js";import"./SearchOutlined-BeNzckjZ.js";import"./Pagination-LfsAsTb5.js";import"./LeftOutlined-DWSwulV9.js";import"./RightOutlined-BcmokP1E.js";import"./index-CH2Uf8NX.js";import"./react-number-format.es-ogMwFcnb.js";import"./index-D8QiLRAd.js";import"./collapse-BbEVqHco.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./convertToTooltipProps-BMW7kJHh.js";import"./ExclamationCircleFilled-BBVgPxRh.js";import"./Input-BajgXS1c.js";import"./EyeOutlined-DuaSqq6v.js";import"./TextArea-COy2yrfm.js";function P(){return e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto! mb-12!",children:[e.jsx(x,{span:24,md:16,children:e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(i,{children:e.jsx(u,{dataSource:[1,2],renderItem:()=>e.jsx(d,{avatar:!0,paragraph:{rows:2},loading:!0})})}),e.jsx(i,{children:e.jsx(d.Input,{className:"w-full! h-16!"})})]})}),e.jsx(x,{span:24,md:8,children:e.jsxs(i,{children:[e.jsx(d,{loading:!0,paragraph:!0}),e.jsx(d.Button,{className:"w-full! mt-4"})]})})]})}const z=({loading:a})=>{const{items:t}=j(),r=t.reduce((l,s)=>l+s.quantity,0),n=0,o=t.reduce((l,s)=>l+(s.price-S(s.price,s.discount)),0),m=t.reduce((l,s)=>l+s.quantity*s.price,0),p=n+m-o,y=o/m*100;return e.jsxs(i,{title:"Order Summary",className:"bg-gray-50!",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Item's Total"," (",r,")"]}),e.jsx(c,{value:m})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:"Delivery Fee"}),e.jsx(c,{value:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Discount(",e.jsx(c,{prefix:"",suffix:"%",decimalScale:0,value:y}),")"]}),e.jsx(c,{value:o})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3",children:[e.jsx("p",{className:"font-bold",children:"Total"}),e.jsx(c,{value:p})]}),e.jsx(C,{className:"w-full mt-8",loading:a,htmlType:"submit",size:"large",type:"primary",children:"Checkout"})]})},A=()=>{const{items:a}=j();return e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(i,{title:"Cart Items",className:"bg-gray-50!",classNames:{body:"p-0!"},children:e.jsx(u,{size:"small",dataSource:a,renderItem:(t,r)=>e.jsx(u.Item,{children:e.jsx(u.Item.Meta,{avatar:e.jsx(F,{src:k(t.image),shape:"square",size:"large"}),title:t.name,description:e.jsxs("p",{children:["QTY: ",t.quantity]})})})})}),e.jsx(i,{className:"bg-gray-50!",title:"Delivery Address",children:e.jsx(g.Item,{name:"address",rules:[{required:!0}],children:e.jsx(q.TextArea,{placeholder:"Enter delivery address"})})})]})};async function Ie({params:a}){const t=localStorage.getItem(I.storage.cartName);if(t){const r=JSON.parse(t);if(r.length>0)return{items:r}}return b("/shop")}const Se=N(function({loaderData:{items:t}}){const r=w(),n=r.state!=="idle";function o(m){r.submit({...m,items:JSON.stringify(t.map(p=>({id:p.id,quantity:p.quantity})))},{method:"POST"})}return e.jsx(g,{onFinish:o,children:e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto!",children:[e.jsx(x,{span:24,md:16,children:e.jsx(A,{})}),e.jsx(x,{span:24,md:8,children:e.jsx(z,{loading:n})})]})})}),ke=v(function(){return e.jsx(P,{})});export{ke as HydrateFallback,Ie as clientLoader,Se as default};
