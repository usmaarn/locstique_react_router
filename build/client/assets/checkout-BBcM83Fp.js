import{w as N,a as v}from"./with-props-zgZ4Swg7.js";import{j as e,e as j,z as b,a as w}from"./chunk-D4RADZKF-DAz_vGcL.js";import{c as I}from"./config-Y8BI0tot.js";import{R as h,C as x}from"./row-lNwB0GMQ.js";import{S as f}from"./index-CItnkCRU.js";import{C as i}from"./index-DBVo6aQJ.js";import{L as u}from"./index-DjaHCjle.js";import{S as d}from"./Skeleton-c8QWDCRi.js";import{P as c}from"./price-format-4KxdFil5.js";import{a as S,g as k}from"./utils-CNuFmlBv.js";import{B as C}from"./button-BHijcmC7.js";import{A as F}from"./index-BQOtWco4.js";import{F as g}from"./index-BRBbHYnL.js";import{I as q}from"./index-DB0Ln5WD.js";import"./index-blh_t3tb.js";import"./useBreakpoint-B7m96Ekk.js";import"./CloseOutlined-Dy2HrFbl.js";import"./EllipsisOutlined-CieEX8qC.js";import"./index-BAed6j4S.js";import"./ContextIsolator-oaooBrlp.js";import"./index-D4ZOqxWl.js";import"./Overflow-CSGCzpcK.js";import"./getAllowClear-RJcteg7o.js";import"./CloseCircleFilled-BB15cPNT.js";import"./extendsObject-C6pccdOq.js";import"./index-lDD27JVI.js";import"./pickAttrs-BDmP-lu7.js";import"./PurePanel-DQWTWKaP.js";import"./move-B7plCz5U.js";import"./DownOutlined-DatLSNvX.js";import"./SearchOutlined-d4YbfynM.js";import"./Pagination-sp4ziX3s.js";import"./LeftOutlined-XQszqjzV.js";import"./RightOutlined-ChWhwkp3.js";import"./index-BMw-dO_3.js";import"./react-number-format.es-Bf5wJkGf.js";import"./index-D9CIBdyn.js";import"./collapse-BbEVqHco.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./convertToTooltipProps-FkdqikIB.js";import"./ExclamationCircleFilled-W6vk6RFQ.js";import"./Input-DsPYekik.js";import"./EyeOutlined-6hR7CDcx.js";import"./TextArea-DuDk0je7.js";function P(){return e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto! mb-12!",children:[e.jsx(x,{span:24,md:16,children:e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(i,{children:e.jsx(u,{dataSource:[1,2],renderItem:()=>e.jsx(d,{avatar:!0,paragraph:{rows:2},loading:!0})})}),e.jsx(i,{children:e.jsx(d.Input,{className:"w-full! h-16!"})})]})}),e.jsx(x,{span:24,md:8,children:e.jsxs(i,{children:[e.jsx(d,{loading:!0,paragraph:!0}),e.jsx(d.Button,{className:"w-full! mt-4"})]})})]})}const z=({loading:a})=>{const{items:t}=j(),r=t.reduce((l,s)=>l+s.quantity,0),n=0,o=t.reduce((l,s)=>l+(s.price-S(s.price,s.discount)),0),m=t.reduce((l,s)=>l+s.quantity*s.price,0),p=n+m-o,y=o/m*100;return e.jsxs(i,{title:"Order Summary",className:"bg-gray-50!",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Item's Total"," (",r,")"]}),e.jsx(c,{value:m})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:"Delivery Fee"}),e.jsx(c,{value:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Discount(",e.jsx(c,{prefix:"",suffix:"%",decimalScale:0,value:y}),")"]}),e.jsx(c,{value:o})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3",children:[e.jsx("p",{className:"font-bold",children:"Total"}),e.jsx(c,{value:p})]}),e.jsx(C,{className:"w-full mt-8",loading:a,htmlType:"submit",size:"large",type:"primary",children:"Checkout"})]})},A=()=>{const{items:a}=j();return e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(i,{title:"Cart Items",className:"bg-gray-50!",classNames:{body:"p-0!"},children:e.jsx(u,{size:"small",dataSource:a,renderItem:(t,r)=>e.jsx(u.Item,{children:e.jsx(u.Item.Meta,{avatar:e.jsx(F,{src:k(t.image),shape:"square",size:"large"}),title:t.name,description:e.jsxs("p",{children:["QTY: ",t.quantity]})})})})}),e.jsx(i,{className:"bg-gray-50!",title:"Delivery Address",children:e.jsx(g.Item,{name:"address",rules:[{required:!0}],children:e.jsx(q.TextArea,{placeholder:"Enter delivery address"})})})]})};async function we({params:a}){const t=localStorage.getItem(I.storage.cartName);if(t){const r=JSON.parse(t);if(r.length>0)return{items:r}}return b("/shop")}const Ie=N(function({loaderData:{items:t}}){const r=w(),n=r.state!=="idle";function o(m){r.submit({...m,items:JSON.stringify(t.map(p=>({id:p.id,quantity:p.quantity})))},{method:"POST"})}return e.jsx(g,{onFinish:o,children:e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto!",children:[e.jsx(x,{span:24,md:16,children:e.jsx(A,{})}),e.jsx(x,{span:24,md:8,children:e.jsx(z,{loading:n})})]})})}),Se=v(function(){return e.jsx(P,{})});export{Se as HydrateFallback,we as clientLoader,Ie as default};
