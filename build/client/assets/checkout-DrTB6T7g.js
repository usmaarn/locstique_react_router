import{w as N,a as v}from"./with-props-zgZ4Swg7.js";import{j as e,e as j,z as b,a as w,r as I}from"./chunk-D4RADZKF-DAz_vGcL.js";import{c as S}from"./config-Y8BI0tot.js";import{R as h,C as x}from"./row-lNwB0GMQ.js";import{S as f}from"./index-CItnkCRU.js";import{C as o}from"./index-DBVo6aQJ.js";import{L as u}from"./index-DjaHCjle.js";import{S as d}from"./Skeleton-c8QWDCRi.js";import{P as l}from"./price-format-4KxdFil5.js";import{a as k,g as C}from"./utils-CNuFmlBv.js";import{B as F}from"./button-BHijcmC7.js";import{A as q}from"./index-BQOtWco4.js";import{F as g}from"./index-BRBbHYnL.js";import{I as P}from"./index-DB0Ln5WD.js";import{s as z}from"./index-DXFem7WI.js";import"./index-blh_t3tb.js";import"./useBreakpoint-B7m96Ekk.js";import"./CloseOutlined-Dy2HrFbl.js";import"./EllipsisOutlined-CieEX8qC.js";import"./index-BAed6j4S.js";import"./ContextIsolator-oaooBrlp.js";import"./index-D4ZOqxWl.js";import"./Overflow-CSGCzpcK.js";import"./getAllowClear-RJcteg7o.js";import"./CloseCircleFilled-BB15cPNT.js";import"./extendsObject-C6pccdOq.js";import"./index-lDD27JVI.js";import"./pickAttrs-BDmP-lu7.js";import"./PurePanel-DQWTWKaP.js";import"./move-B7plCz5U.js";import"./DownOutlined-DatLSNvX.js";import"./SearchOutlined-d4YbfynM.js";import"./Pagination-sp4ziX3s.js";import"./LeftOutlined-XQszqjzV.js";import"./RightOutlined-ChWhwkp3.js";import"./index-BMw-dO_3.js";import"./react-number-format.es-Bf5wJkGf.js";import"./index-D9CIBdyn.js";import"./collapse-BbEVqHco.js";import"./QuestionCircleOutlined-CkfPyHQh.js";import"./convertToTooltipProps-FkdqikIB.js";import"./ExclamationCircleFilled-W6vk6RFQ.js";import"./Input-DsPYekik.js";import"./EyeOutlined-6hR7CDcx.js";import"./TextArea-DuDk0je7.js";import"./InfoCircleFilled-Bmgfd1T2.js";function A(){return e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto! mb-12!",children:[e.jsx(x,{span:24,md:16,children:e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(o,{children:e.jsx(u,{dataSource:[1,2],renderItem:()=>e.jsx(d,{avatar:!0,paragraph:{rows:2},loading:!0})})}),e.jsx(o,{children:e.jsx(d.Input,{className:"w-full! h-16!"})})]})}),e.jsx(x,{span:24,md:8,children:e.jsxs(o,{children:[e.jsx(d,{loading:!0,paragraph:!0}),e.jsx(d.Button,{className:"w-full! mt-4"})]})})]})}const D=({loading:i})=>{const{items:t}=j(),r=t.reduce((c,s)=>c+s.quantity,0),n=0,m=t.reduce((c,s)=>c+(s.price-k(s.price,s.discount))*s.quantity,0),a=t.reduce((c,s)=>c+s.quantity*s.price,0),p=n+a-m,y=m/a*100;return e.jsxs(o,{title:"Order Summary",className:"bg-gray-50!",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Item's Total"," (",r,")"]}),e.jsx(l,{value:a})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:"Delivery Fee"}),e.jsx(l,{value:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Discount(",e.jsx(l,{prefix:"",suffix:"%",decimalScale:0,value:y}),")"]}),e.jsx(l,{value:m})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3",children:[e.jsx("p",{className:"font-bold",children:"Total"}),e.jsx(l,{value:p})]}),e.jsx(F,{className:"w-full mt-8",loading:i,htmlType:"submit",size:"large",type:"primary",children:"Checkout"})]})},T=()=>{const{items:i}=j();return e.jsxs(f,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(o,{title:"Cart Items",className:"bg-gray-50!",classNames:{body:"p-0!"},children:e.jsx(u,{size:"small",dataSource:i,renderItem:(t,r)=>e.jsx(u.Item,{children:e.jsx(u.Item.Meta,{avatar:e.jsx(q,{src:C(t.image),shape:"square",size:"large"}),title:t.name,description:e.jsxs("p",{children:["QTY: ",t.quantity]})})})})}),e.jsx(o,{className:"bg-gray-50!",title:"Delivery Address",children:e.jsx(g.Item,{name:"address",rules:[{required:!0}],children:e.jsx(P.TextArea,{placeholder:"Enter delivery address"})})})]})};async function Ce({params:i}){const t=localStorage.getItem(S.storage.cartName);if(t){const r=JSON.parse(t);if(r.length>0)return{items:r}}return b("/shop")}const Fe=N(function({loaderData:{items:t}}){const r=w(),n=r.state!=="idle";function m(a){r.submit({...a,items:JSON.stringify(t.map(p=>({id:p.id,quantity:p.quantity})))},{method:"POST"})}return I.useEffect(()=>{var a;(a=r.data)!=null&&a.message&&z.error(r.data.message)},[r.data]),e.jsx(g,{onFinish:m,children:e.jsxs(h,{gutter:[24,24],className:"p-3 max-w-6xl mx-auto!",children:[e.jsx(x,{span:24,md:16,children:e.jsx(T,{})}),e.jsx(x,{span:24,md:8,children:e.jsx(D,{loading:n})})]})})}),qe=v(function(){return e.jsx(A,{})});export{qe as HydrateFallback,Ce as clientLoader,Fe as default};
